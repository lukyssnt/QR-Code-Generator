<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QR Code Generator - Luky Susanto</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      margin: 0; padding: 0;
      display: flex; justify-content: center; align-items: center;
      min-height: 100vh;
      color: #333;
    }
    .container {
      background: #fff;
      padding: 25px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      max-width: 450px;
      width: 100%;
      text-align: center;
    }
    h1 {
      font-weight: 600;
      margin-bottom: 15px;
      color: #444;
    }
    label {
      font-weight: 500;
      display: block;
      margin: 12px 0 6px;
      text-align: left;
    }
    input, select {
      padding: 10px;
      width: 100%;
      border-radius: 10px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
      font-family: inherit;
    }
    input[type="color"] {
      padding: 2px;
      height: 40px;
      cursor: pointer;
    }
    .palette {
      display: flex; flex-wrap: wrap;
      gap: 8px; margin: 8px 0 15px;
    }
    .color-box {
      width: 30px; height: 30px;
      border-radius: 6px;
      cursor: pointer;
      border: 2px solid #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      transition: transform 0.2s;
    }
    .color-box:hover { transform: scale(1.1); }
    button {
      background: #667eea;
      color: #fff;
      border: none;
      padding: 12px 20px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      width: 100%;
      margin-top: 10px;
      transition: 0.3s;
    }
    button:hover {
      background: #5563d6;
    }
    #qrcode {
      margin: 20px 0;
    }
    footer {
      margin-top: 15px;
      font-size: 13px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>QR Code Generator</h1>
    <label for="text">Teks / Link:</label>
    <input type="text" id="text" placeholder="Masukkan teks atau URL">

    <label for="logo">Logo (opsional):</label>
    <input type="file" id="logo" accept="image/*">

    <label for="size">Ukuran (px):</label>
    <input type="number" id="size" value="250" min="100" max="600">

    <label>Warna QR:</label>
    <input type="color" id="qrColor" value="#000000">
    <div class="palette" id="qrPalette"></div>

    <label>Warna Background:</label>
    <input type="color" id="bgColor" value="#ffffff">
    <div class="palette" id="bgPalette"></div>

    <button onclick="generateQR()">Generate QR Code</button>

    <div id="qrcode"></div>
    <a id="downloadLink" style="display:none;" download="qrcode.png">
      <button>Download QR</button>
    </a>

    <footer>âœ¨ Dibuat oleh <b>Luky Susanto</b></footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script>
    const qrPaletteColors = ["#000000","#1E90FF","#FF0000","#008000","#FFD700","#800080","#FF8C00"];
    const bgPaletteColors = ["#FFFFFF","#F0F0F0","#FFFFE0","#E6FFFA","#FFF0F5","#F5F5DC","#D3D3D3"];

    const qrPalette = document.getElementById("qrPalette");
    const bgPalette = document.getElementById("bgPalette");
    const qrColorInput = document.getElementById("qrColor");
    const bgColorInput = document.getElementById("bgColor");

    // buat kotak warna
    qrPaletteColors.forEach(color=>{
      let box=document.createElement("div");
      box.className="color-box";
      box.style.background=color;
      box.onclick=()=>{ qrColorInput.value=color; };
      qrPalette.appendChild(box);
    });

    bgPaletteColors.forEach(color=>{
      let box=document.createElement("div");
      box.className="color-box";
      box.style.background=color;
      box.onclick=()=>{ bgColorInput.value=color; };
      bgPalette.appendChild(box);
    });

    function generateQR() {
      const text = document.getElementById("text").value;
      const size = parseInt(document.getElementById("size").value);
      const qrColor = qrColorInput.value;
      const bgColor = bgColorInput.value;
      const logoInput = document.getElementById("logo");
      const qrContainer = document.getElementById("qrcode");
      const downloadLink = document.getElementById("downloadLink");
      
      qrContainer.innerHTML = "";

      if (!text) {
        alert("Masukkan teks terlebih dahulu!");
        return;
      }

      const canvas = document.createElement("canvas");
      QRCode.toCanvas(canvas, text, {
        width: size,
        color: {
          dark: qrColor,
          light: bgColor
        }
      }, (err)=>{
        if(err) console.error(err);
        else {
          // tambahkan logo jika ada
          if (logoInput.files && logoInput.files[0]) {
            const ctx = canvas.getContext("2d");
            const logo = new Image();
            logo.src = URL.createObjectURL(logoInput.files[0]);
            logo.onload = ()=> {
              const logoSize = size * 0.2;
              ctx.drawImage(logo, (size-logoSize)/2, (size-logoSize)/2, logoSize, logoSize);
              showResult(canvas, qrContainer, downloadLink);
            }
          } else {
            showResult(canvas, qrContainer, downloadLink);
          }
        }
      });
    }

    function showResult(canvas, container, downloadLink){
      container.appendChild(canvas);
      downloadLink.href = canvas.toDataURL("image/png");
      downloadLink.style.display="block";
    }
  </script>
</body>
</html>
